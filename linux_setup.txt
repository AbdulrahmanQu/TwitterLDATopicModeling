# setting up the entire environment from 
# fresh Ubuntu 16.04 LTS 64-bit install

sudo apt-get -y update
sudo apt-get -y upgrade
sudo apt-get -y install vim

# install accelerated BLAS environment 
# openBLAS should be there by default...just in case
sudo apt-get -y install build-essential
sudo apt-get -y install libblas-dev liblapack-dev libatlas-base-dev gfortran
sudo apt-get -y install python-dev
sudo apt-get -y install libfreetype6-dev libxft-dev
export LAPACK=/usr/lib/liblapack.so
export ATLAS=/usr/lib/libatlas.so

# download the repository
sudo apt-get -y install git
git clone https://www.github.com/kenneth-orton/twitter_LDA_topic_modeling

# create virtual_env and install requirements
cd twitter_LDA_topic_modeling/
wget https://bootstrap.pypa.io/get-pip.py
sudo python get-pip.py
rm get-pip.py
sudo pip install virtualenv

virtualenv -p /usr/bin/python2.7 venv
source venv/bin/activate

# check for BLAS installation
pip install -r requirements.txt
python -c 'import numpy; numpy.show()_config()'

# patch Gensim modules and download stopword lists
printf 'd\nstopwords\nq' | python -c 'import nltk; nltk.download()'

chmod +x patch_env_modules.sh
./patch_env_modules.sh

# install Amazon AWS CLI
sudo apt-get install awscli

# configure AWS keys and S3 location
aws configure
